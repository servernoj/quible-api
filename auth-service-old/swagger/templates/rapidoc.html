<!doctype html>
<html>

<head>
  <title>Quible.io API</title>
  <meta charset="utf-8"/>
  <style>
    body {
      margin: 0;
      padding: 0;
    }
  </style>
  <script type="module" src="https://unpkg.com/rapidoc/dist/rapidoc-min.js"></script>
</head>

<body>
  <script>    
    window.addEventListener('load',function () {
      const baseURL = location.origin + location.pathname      
      const externalAttributes = Array.from(new URL(location.href).searchParams.entries()).reduce(
        (acc, [key, value]) => ({ ...acc, [key]: value }), 
        {}
      )
      const attributes = {
        'spec-url': `${baseURL}/spec`,
        'sort-endpoints-by': 'path',
        'theme': 'dark',
        'text-color': '#eef',
        'render-style': 'view',
        'schema-style': 'table',
        'schema-description-expanded': 'true',
        'show-header': 'false',
        'allow-authentication': 'false',
        'allow-spec-file-download': 'true',
        'allow-advanced-search': 'true',
        'allow-try': 'false',
        'allow-server-selection': 'false',
        ...externalAttributes
      }
      const el = document.createElement('rapi-doc')
      Object.entries(attributes).forEach(
        ([key,value]) => {
          el.setAttribute(key, value)
        }
      )      
      document.body.append(el)
    })
  </script>
</body>

</html>